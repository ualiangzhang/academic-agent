"use strict";var __runInitializers=exports&&exports.__runInitializers||function(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__esDecorate=exports&&exports.__esDecorate||function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(f!==void 0&&typeof f!="function")throw new TypeError("Function expected");return f}for(var kind=contextIn.kind,key=kind==="getter"?"get":kind==="setter"?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),_,done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]=p==="access"?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])(kind==="accessor"?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if(kind==="accessor"){if(result===void 0)continue;if(result===null||typeof result!="object")throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&(kind==="field"?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HttpCodeTarget=exports.HttpCodeElb=exports.ApplicationLoadBalancer=exports.XffHeaderProcessingMode=void 0;var jsiiDeprecationWarnings=()=>{var tmp=require("../../../.warnings.jsii.js");return jsiiDeprecationWarnings=()=>tmp,tmp};const JSII_RTTI_SYMBOL_1=Symbol.for("jsii.rtti");var application_listener_1=()=>{var tmp=require("./application-listener");return application_listener_1=()=>tmp,tmp},application_listener_action_1=()=>{var tmp=require("./application-listener-action");return application_listener_action_1=()=>tmp,tmp},cloudwatch=()=>{var tmp=require("../../../aws-cloudwatch");return cloudwatch=()=>tmp,tmp},ec2=()=>{var tmp=require("../../../aws-ec2");return ec2=()=>tmp,tmp},policy_statement_1=()=>{var tmp=require("../../../aws-iam/lib/policy-statement");return policy_statement_1=()=>tmp,tmp},principals_1=()=>{var tmp=require("../../../aws-iam/lib/principals");return principals_1=()=>tmp,tmp},cxschema=()=>{var tmp=require("../../../cloud-assembly-schema");return cxschema=()=>tmp,tmp},core_1=()=>{var tmp=require("../../../core");return core_1=()=>tmp,tmp},errors_1=()=>{var tmp=require("../../../core/lib/errors");return errors_1=()=>tmp,tmp},metadata_resource_1=()=>{var tmp=require("../../../core/lib/metadata-resource");return metadata_resource_1=()=>tmp,tmp},prop_injectable_1=()=>{var tmp=require("../../../core/lib/prop-injectable");return prop_injectable_1=()=>tmp,tmp},cxapi=()=>{var tmp=require("../../../cx-api");return cxapi=()=>tmp,tmp},elasticloadbalancingv2_canned_metrics_generated_1=()=>{var tmp=require("../elasticloadbalancingv2-canned-metrics.generated");return elasticloadbalancingv2_canned_metrics_generated_1=()=>tmp,tmp},base_load_balancer_1=()=>{var tmp=require("../shared/base-load-balancer");return base_load_balancer_1=()=>tmp,tmp},enums_1=()=>{var tmp=require("../shared/enums");return enums_1=()=>tmp,tmp},util_1=()=>{var tmp=require("../shared/util");return util_1=()=>tmp,tmp},XffHeaderProcessingMode;(function(XffHeaderProcessingMode2){XffHeaderProcessingMode2.APPEND="append",XffHeaderProcessingMode2.PRESERVE="preserve",XffHeaderProcessingMode2.REMOVE="remove"})(XffHeaderProcessingMode||(exports.XffHeaderProcessingMode=XffHeaderProcessingMode={}));let ApplicationLoadBalancer=(()=>{let _classDecorators=[prop_injectable_1().propertyInjectable],_classDescriptor,_classExtraInitializers=[],_classThis,_classSuper=base_load_balancer_1().BaseLoadBalancer,_instanceExtraInitializers=[],_addListener_decorators,_addRedirect_decorators,_logAccessLogs_decorators,_logConnectionLogs_decorators,_addSecurityGroup_decorators,_metric_decorators,_metricActiveConnectionCount_decorators,_metricClientTlsNegotiationErrorCount_decorators,_metricConsumedLCUs_decorators,_metricHttpFixedResponseCount_decorators,_metricHttpRedirectCount_decorators,_metricHttpRedirectUrlLimitExceededCount_decorators,_metricHttpCodeElb_decorators,_metricHttpCodeTarget_decorators,_metricIpv6ProcessedBytes_decorators,_metricIpv6RequestCount_decorators,_metricNewConnectionCount_decorators,_metricProcessedBytes_decorators,_metricRejectedConnectionCount_decorators,_metricRequestCount_decorators,_metricRuleEvaluations_decorators,_metricTargetConnectionErrorCount_decorators,_metricTargetResponseTime_decorators,_metricTargetTLSNegotiationErrorCount_decorators,_metricElbAuthError_decorators,_metricElbAuthFailure_decorators,_metricElbAuthLatency_decorators,_metricElbAuthSuccess_decorators;var ApplicationLoadBalancer2=class extends _classSuper{static{_classThis=this}static{const _metadata=typeof Symbol=="function"&&Symbol.metadata?Object.create(_classSuper[Symbol.metadata]??null):void 0;_addListener_decorators=[(0,metadata_resource_1().MethodMetadata)()],_addRedirect_decorators=[(0,metadata_resource_1().MethodMetadata)()],_logAccessLogs_decorators=[(0,metadata_resource_1().MethodMetadata)()],_logConnectionLogs_decorators=[(0,metadata_resource_1().MethodMetadata)()],_addSecurityGroup_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metric_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricActiveConnectionCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricClientTlsNegotiationErrorCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricConsumedLCUs_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricHttpFixedResponseCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricHttpRedirectCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricHttpRedirectUrlLimitExceededCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricHttpCodeElb_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricHttpCodeTarget_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricIpv6ProcessedBytes_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricIpv6RequestCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricNewConnectionCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricProcessedBytes_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricRejectedConnectionCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricRequestCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricRuleEvaluations_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricTargetConnectionErrorCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricTargetResponseTime_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricTargetTLSNegotiationErrorCount_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricElbAuthError_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricElbAuthFailure_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricElbAuthLatency_decorators=[(0,metadata_resource_1().MethodMetadata)()],_metricElbAuthSuccess_decorators=[(0,metadata_resource_1().MethodMetadata)()],__esDecorate(this,null,_addListener_decorators,{kind:"method",name:"addListener",static:!1,private:!1,access:{has:obj=>"addListener"in obj,get:obj=>obj.addListener},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_addRedirect_decorators,{kind:"method",name:"addRedirect",static:!1,private:!1,access:{has:obj=>"addRedirect"in obj,get:obj=>obj.addRedirect},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_logAccessLogs_decorators,{kind:"method",name:"logAccessLogs",static:!1,private:!1,access:{has:obj=>"logAccessLogs"in obj,get:obj=>obj.logAccessLogs},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_logConnectionLogs_decorators,{kind:"method",name:"logConnectionLogs",static:!1,private:!1,access:{has:obj=>"logConnectionLogs"in obj,get:obj=>obj.logConnectionLogs},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_addSecurityGroup_decorators,{kind:"method",name:"addSecurityGroup",static:!1,private:!1,access:{has:obj=>"addSecurityGroup"in obj,get:obj=>obj.addSecurityGroup},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metric_decorators,{kind:"method",name:"metric",static:!1,private:!1,access:{has:obj=>"metric"in obj,get:obj=>obj.metric},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricActiveConnectionCount_decorators,{kind:"method",name:"metricActiveConnectionCount",static:!1,private:!1,access:{has:obj=>"metricActiveConnectionCount"in obj,get:obj=>obj.metricActiveConnectionCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricClientTlsNegotiationErrorCount_decorators,{kind:"method",name:"metricClientTlsNegotiationErrorCount",static:!1,private:!1,access:{has:obj=>"metricClientTlsNegotiationErrorCount"in obj,get:obj=>obj.metricClientTlsNegotiationErrorCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricConsumedLCUs_decorators,{kind:"method",name:"metricConsumedLCUs",static:!1,private:!1,access:{has:obj=>"metricConsumedLCUs"in obj,get:obj=>obj.metricConsumedLCUs},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricHttpFixedResponseCount_decorators,{kind:"method",name:"metricHttpFixedResponseCount",static:!1,private:!1,access:{has:obj=>"metricHttpFixedResponseCount"in obj,get:obj=>obj.metricHttpFixedResponseCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricHttpRedirectCount_decorators,{kind:"method",name:"metricHttpRedirectCount",static:!1,private:!1,access:{has:obj=>"metricHttpRedirectCount"in obj,get:obj=>obj.metricHttpRedirectCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricHttpRedirectUrlLimitExceededCount_decorators,{kind:"method",name:"metricHttpRedirectUrlLimitExceededCount",static:!1,private:!1,access:{has:obj=>"metricHttpRedirectUrlLimitExceededCount"in obj,get:obj=>obj.metricHttpRedirectUrlLimitExceededCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricHttpCodeElb_decorators,{kind:"method",name:"metricHttpCodeElb",static:!1,private:!1,access:{has:obj=>"metricHttpCodeElb"in obj,get:obj=>obj.metricHttpCodeElb},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricHttpCodeTarget_decorators,{kind:"method",name:"metricHttpCodeTarget",static:!1,private:!1,access:{has:obj=>"metricHttpCodeTarget"in obj,get:obj=>obj.metricHttpCodeTarget},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricIpv6ProcessedBytes_decorators,{kind:"method",name:"metricIpv6ProcessedBytes",static:!1,private:!1,access:{has:obj=>"metricIpv6ProcessedBytes"in obj,get:obj=>obj.metricIpv6ProcessedBytes},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricIpv6RequestCount_decorators,{kind:"method",name:"metricIpv6RequestCount",static:!1,private:!1,access:{has:obj=>"metricIpv6RequestCount"in obj,get:obj=>obj.metricIpv6RequestCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricNewConnectionCount_decorators,{kind:"method",name:"metricNewConnectionCount",static:!1,private:!1,access:{has:obj=>"metricNewConnectionCount"in obj,get:obj=>obj.metricNewConnectionCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricProcessedBytes_decorators,{kind:"method",name:"metricProcessedBytes",static:!1,private:!1,access:{has:obj=>"metricProcessedBytes"in obj,get:obj=>obj.metricProcessedBytes},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricRejectedConnectionCount_decorators,{kind:"method",name:"metricRejectedConnectionCount",static:!1,private:!1,access:{has:obj=>"metricRejectedConnectionCount"in obj,get:obj=>obj.metricRejectedConnectionCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricRequestCount_decorators,{kind:"method",name:"metricRequestCount",static:!1,private:!1,access:{has:obj=>"metricRequestCount"in obj,get:obj=>obj.metricRequestCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricRuleEvaluations_decorators,{kind:"method",name:"metricRuleEvaluations",static:!1,private:!1,access:{has:obj=>"metricRuleEvaluations"in obj,get:obj=>obj.metricRuleEvaluations},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricTargetConnectionErrorCount_decorators,{kind:"method",name:"metricTargetConnectionErrorCount",static:!1,private:!1,access:{has:obj=>"metricTargetConnectionErrorCount"in obj,get:obj=>obj.metricTargetConnectionErrorCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricTargetResponseTime_decorators,{kind:"method",name:"metricTargetResponseTime",static:!1,private:!1,access:{has:obj=>"metricTargetResponseTime"in obj,get:obj=>obj.metricTargetResponseTime},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricTargetTLSNegotiationErrorCount_decorators,{kind:"method",name:"metricTargetTLSNegotiationErrorCount",static:!1,private:!1,access:{has:obj=>"metricTargetTLSNegotiationErrorCount"in obj,get:obj=>obj.metricTargetTLSNegotiationErrorCount},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricElbAuthError_decorators,{kind:"method",name:"metricElbAuthError",static:!1,private:!1,access:{has:obj=>"metricElbAuthError"in obj,get:obj=>obj.metricElbAuthError},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricElbAuthFailure_decorators,{kind:"method",name:"metricElbAuthFailure",static:!1,private:!1,access:{has:obj=>"metricElbAuthFailure"in obj,get:obj=>obj.metricElbAuthFailure},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricElbAuthLatency_decorators,{kind:"method",name:"metricElbAuthLatency",static:!1,private:!1,access:{has:obj=>"metricElbAuthLatency"in obj,get:obj=>obj.metricElbAuthLatency},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,_metricElbAuthSuccess_decorators,{kind:"method",name:"metricElbAuthSuccess",static:!1,private:!1,access:{has:obj=>"metricElbAuthSuccess"in obj,get:obj=>obj.metricElbAuthSuccess},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(null,_classDescriptor={value:_classThis},_classDecorators,{kind:"class",name:_classThis.name,metadata:_metadata},null,_classExtraInitializers),ApplicationLoadBalancer2=_classThis=_classDescriptor.value,_metadata&&Object.defineProperty(_classThis,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}static[JSII_RTTI_SYMBOL_1]={fqn:"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer",version:"2.220.0"};static PROPERTY_INJECTION_ID="aws-cdk-lib.aws-elasticloadbalancingv2.ApplicationLoadBalancer";static fromLookup(scope,id,options){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_elasticloadbalancingv2_ApplicationLoadBalancerLookupOptions(options)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.fromLookup),error}const props=base_load_balancer_1().BaseLoadBalancer._queryContextProvider(scope,{userOptions:options,loadBalancerType:cxschema().LoadBalancerType.APPLICATION});return new LookedUpApplicationLoadBalancer(scope,id,props)}static fromApplicationLoadBalancerAttributes(scope,id,attrs){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_elasticloadbalancingv2_ApplicationLoadBalancerAttributes(attrs)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.fromApplicationLoadBalancerAttributes),error}return new ImportedApplicationLoadBalancer(scope,id,attrs)}connections=__runInitializers(this,_instanceExtraInitializers);ipAddressType;listeners;metrics;constructor(scope,id,props){super(scope,id,props,{type:"application",securityGroups:core_1().Lazy.list({produce:()=>this.connections.securityGroups.map(sg=>sg.securityGroupId)}),ipAddressType:props.ipAddressType});try{jsiiDeprecationWarnings().aws_cdk_lib_aws_elasticloadbalancingv2_ApplicationLoadBalancerProps(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,ApplicationLoadBalancer2),error}(0,metadata_resource_1().addConstructMetadata)(this,props);const minimumCapacityUnit=props.minimumCapacityUnit;if(minimumCapacityUnit&&!core_1().Token.isUnresolved(minimumCapacityUnit)&&(!Number.isInteger(minimumCapacityUnit)||minimumCapacityUnit<100))throw new(errors_1()).ValidationError(`'minimumCapacityUnit' must be a positive integer greater than or equal to 100 for Application Load Balancer, got: ${minimumCapacityUnit}.`,this);if(this.ipAddressType=props.ipAddressType??enums_1().IpAddressType.IPV4,props.ipAddressType===enums_1().IpAddressType.DUAL_STACK_WITHOUT_PUBLIC_IPV4&&!props.internetFacing)throw new(errors_1()).ValidationError("dual-stack without public IPv4 address can only be used with internet-facing scheme.",this);const securityGroups=[props.securityGroup||new(ec2()).SecurityGroup(this,"SecurityGroup",{vpc:props.vpc,description:`Automatically created Security Group for ELB ${core_1().Names.uniqueId(this)}`,allowAllOutbound:!1})];if(this.connections=new(ec2()).Connections({securityGroups}),this.listeners=[],this.metrics=new ApplicationLoadBalancerMetrics(this,this.loadBalancerFullName),props.http2Enabled!==void 0&&this.setAttribute("routing.http2.enabled",props.http2Enabled?"true":"false"),props.idleTimeout!==void 0&&this.setAttribute("idle_timeout.timeout_seconds",props.idleTimeout.toSeconds().toString()),props.dropInvalidHeaderFields&&this.setAttribute("routing.http.drop_invalid_header_fields.enabled","true"),props.desyncMitigationMode!==void 0&&this.setAttribute("routing.http.desync_mitigation_mode",props.desyncMitigationMode),props.preserveHostHeader&&this.setAttribute("routing.http.preserve_host_header.enabled","true"),props.xAmznTlsVersionAndCipherSuiteHeaders&&this.setAttribute("routing.http.x_amzn_tls_version_and_cipher_suite.enabled","true"),props.preserveXffClientPort&&this.setAttribute("routing.http.xff_client_port.enabled","true"),props.xffHeaderProcessingMode!==void 0&&this.setAttribute("routing.http.xff_header_processing.mode",props.xffHeaderProcessingMode),props.wafFailOpen&&this.setAttribute("waf.fail_open.enabled","true"),props.clientKeepAlive!==void 0){const clientKeepAliveInMillis=props.clientKeepAlive.toMilliseconds();if(clientKeepAliveInMillis<1e3)throw new(errors_1()).ValidationError(`'clientKeepAlive' must be between 60 and 604800 seconds. Got: ${clientKeepAliveInMillis} milliseconds`,this);const clientKeepAliveInSeconds=props.clientKeepAlive.toSeconds();if(clientKeepAliveInSeconds<60||clientKeepAliveInSeconds>604800)throw new(errors_1()).ValidationError(`'clientKeepAlive' must be between 60 and 604800 seconds. Got: ${clientKeepAliveInSeconds} seconds`,this);this.setAttribute("client_keep_alive.seconds",clientKeepAliveInSeconds.toString())}if(props.crossZoneEnabled===!1)throw new(errors_1()).ValidationError("crossZoneEnabled cannot be false with Application Load Balancers.",this)}addListener(id,props){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_elasticloadbalancingv2_BaseApplicationListenerProps(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.addListener),error}const listener=new(application_listener_1()).ApplicationListener(this,id,{loadBalancer:this,...props});return this.listeners.push(listener),listener}addRedirect(props={}){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_elasticloadbalancingv2_ApplicationLoadBalancerRedirectConfig(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.addRedirect),error}const sourcePort=props.sourcePort??80,targetPort=(props.targetPort??443).toString();return this.addListener(`Redirect${sourcePort}To${targetPort}`,{protocol:props.sourceProtocol??enums_1().ApplicationProtocol.HTTP,port:sourcePort,open:props.open??!0,defaultAction:application_listener_action_1().ListenerAction.redirect({port:targetPort,protocol:props.targetProtocol??enums_1().ApplicationProtocol.HTTPS,permanent:!0})})}logAccessLogs(bucket,prefix){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_s3_IBucket(bucket)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.logAccessLogs),error}if(bucket.encryptionKey)throw new(errors_1()).ValidationError("Encryption key detected. Bucket encryption using KMS keys is unsupported",this);prefix=prefix||"",this.setAttribute("access_logs.s3.enabled","true"),this.setAttribute("access_logs.s3.bucket",bucket.bucketName.toString()),this.setAttribute("access_logs.s3.prefix",prefix);const logsDeliveryServicePrincipal=new(principals_1()).ServicePrincipal("delivery.logs.amazonaws.com");bucket.addToResourcePolicy(new(policy_statement_1()).PolicyStatement({actions:["s3:PutObject"],principals:[this.resourcePolicyPrincipal()],resources:[bucket.arnForObjects(`${prefix?prefix+"/":""}AWSLogs/${core_1().Stack.of(this).account}/*`)]})),bucket.addToResourcePolicy(new(policy_statement_1()).PolicyStatement({actions:["s3:PutObject"],principals:[logsDeliveryServicePrincipal],resources:[bucket.arnForObjects(`${prefix?prefix+"/":""}AWSLogs/${this.env.account}/*`)],conditions:{StringEquals:{"s3:x-amz-acl":"bucket-owner-full-control"}}})),bucket.addToResourcePolicy(new(policy_statement_1()).PolicyStatement({actions:["s3:GetBucketAcl"],principals:[logsDeliveryServicePrincipal],resources:[bucket.bucketArn]}));const lb=this.node.defaultChild,bucketPolicy=bucket.policy?.node.defaultChild;lb&&bucketPolicy&&core_1().CfnResource.isCfnResource(lb)&&core_1().CfnResource.isCfnResource(bucketPolicy)&&lb.addDependency(bucketPolicy)}logConnectionLogs(bucket,prefix){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_s3_IBucket(bucket)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.logConnectionLogs),error}if(bucket.encryptionKey)throw new(errors_1()).ValidationError("Encryption key detected. Bucket encryption using KMS keys is unsupported",this);prefix=prefix||"",this.setAttribute("connection_logs.s3.enabled","true"),this.setAttribute("connection_logs.s3.bucket",bucket.bucketName.toString()),this.setAttribute("connection_logs.s3.prefix",prefix);const logsDeliveryServicePrincipal=new(principals_1()).ServicePrincipal("delivery.logs.amazonaws.com");bucket.addToResourcePolicy(new(policy_statement_1()).PolicyStatement({actions:["s3:PutObject"],principals:[this.resourcePolicyPrincipal()],resources:[bucket.arnForObjects(`${prefix?prefix+"/":""}AWSLogs/${core_1().Stack.of(this).account}/*`)]})),bucket.addToResourcePolicy(new(policy_statement_1()).PolicyStatement({actions:["s3:PutObject"],principals:[logsDeliveryServicePrincipal],resources:[bucket.arnForObjects(`${prefix?prefix+"/":""}AWSLogs/${core_1().Stack.of(this).account}/*`)],conditions:{StringEquals:{"s3:x-amz-acl":"bucket-owner-full-control"}}})),bucket.addToResourcePolicy(new(policy_statement_1()).PolicyStatement({actions:["s3:GetBucketAcl"],principals:[logsDeliveryServicePrincipal],resources:[bucket.bucketArn]}));const lb=this.node.defaultChild,bucketPolicy=bucket.policy?.node.defaultChild;lb&&bucketPolicy&&core_1().CfnResource.isCfnResource(lb)&&core_1().CfnResource.isCfnResource(bucketPolicy)&&lb.addDependency(bucketPolicy)}addSecurityGroup(securityGroup){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_ec2_ISecurityGroup(securityGroup)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.addSecurityGroup),error}this.connections.addSecurityGroup(securityGroup)}metric(metricName,props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metric","Use ``ApplicationLoadBalancer.metrics.custom`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metric),error}return this.metrics.custom(metricName,props)}metricActiveConnectionCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricActiveConnectionCount","Use ``ApplicationLoadBalancer.metrics.activeConnectionCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricActiveConnectionCount),error}return this.metrics.activeConnectionCount(props)}metricClientTlsNegotiationErrorCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricClientTlsNegotiationErrorCount","Use ``ApplicationLoadBalancer.metrics.clientTlsNegotiationErrorCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricClientTlsNegotiationErrorCount),error}return this.metrics.clientTlsNegotiationErrorCount(props)}metricConsumedLCUs(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricConsumedLCUs","Use ``ApplicationLoadBalancer.metrics.consumedLCUs`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricConsumedLCUs),error}return this.metrics.consumedLCUs(props)}metricHttpFixedResponseCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricHttpFixedResponseCount","Use ``ApplicationLoadBalancer.metrics.httpFixedResponseCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricHttpFixedResponseCount),error}return this.metrics.httpFixedResponseCount(props)}metricHttpRedirectCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricHttpRedirectCount","Use ``ApplicationLoadBalancer.metrics.httpRedirectCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricHttpRedirectCount),error}return this.metrics.httpRedirectCount(props)}metricHttpRedirectUrlLimitExceededCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricHttpRedirectUrlLimitExceededCount","Use ``ApplicationLoadBalancer.metrics.httpRedirectUrlLimitExceededCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricHttpRedirectUrlLimitExceededCount),error}return this.metrics.httpRedirectUrlLimitExceededCount(props)}metricHttpCodeElb(code,props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricHttpCodeElb","Use ``ApplicationLoadBalancer.metrics.httpCodeElb`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_elasticloadbalancingv2_HttpCodeElb(code),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricHttpCodeElb),error}return this.metrics.httpCodeElb(code,props)}metricHttpCodeTarget(code,props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricHttpCodeTarget","Use ``ApplicationLoadBalancer.metrics.httpCodeTarget`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_elasticloadbalancingv2_HttpCodeTarget(code),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricHttpCodeTarget),error}return this.metrics.httpCodeTarget(code,props)}metricIpv6ProcessedBytes(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricIpv6ProcessedBytes","Use ``ApplicationLoadBalancer.metrics.ipv6ProcessedBytes`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricIpv6ProcessedBytes),error}return this.metrics.ipv6ProcessedBytes(props)}metricIpv6RequestCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricIpv6RequestCount","Use ``ApplicationLoadBalancer.metrics.ipv6RequestCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricIpv6RequestCount),error}return this.metrics.ipv6RequestCount(props)}metricNewConnectionCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricNewConnectionCount","Use ``ApplicationLoadBalancer.metrics.newConnectionCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricNewConnectionCount),error}return this.metrics.newConnectionCount(props)}metricProcessedBytes(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricProcessedBytes","Use ``ApplicationLoadBalancer.metrics.processedBytes`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricProcessedBytes),error}return this.metrics.processedBytes(props)}metricRejectedConnectionCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricRejectedConnectionCount","Use ``ApplicationLoadBalancer.metrics.rejectedConnectionCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricRejectedConnectionCount),error}return this.metrics.rejectedConnectionCount(props)}metricRequestCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricRequestCount","Use ``ApplicationLoadBalancer.metrics.requestCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricRequestCount),error}return this.metrics.requestCount(props)}metricRuleEvaluations(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricRuleEvaluations","Use ``ApplicationLoadBalancer.metrics.ruleEvaluations`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricRuleEvaluations),error}return this.metrics.ruleEvaluations(props)}metricTargetConnectionErrorCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricTargetConnectionErrorCount","Use ``ApplicationLoadBalancer.metrics.targetConnectionErrorCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricTargetConnectionErrorCount),error}return this.metrics.targetConnectionErrorCount(props)}metricTargetResponseTime(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricTargetResponseTime","Use ``ApplicationLoadBalancer.metrics.targetResponseTime`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricTargetResponseTime),error}return this.metrics.targetResponseTime(props)}metricTargetTLSNegotiationErrorCount(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricTargetTLSNegotiationErrorCount","Use ``ApplicationLoadBalancer.metrics.targetTLSNegotiationErrorCount`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricTargetTLSNegotiationErrorCount),error}return this.metrics.targetTLSNegotiationErrorCount(props)}metricElbAuthError(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricElbAuthError","Use ``ApplicationLoadBalancer.metrics.elbAuthError`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricElbAuthError),error}return this.metrics.elbAuthError(props)}metricElbAuthFailure(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricElbAuthFailure","Use ``ApplicationLoadBalancer.metrics.elbAuthFailure`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricElbAuthFailure),error}return this.metrics.elbAuthFailure(props)}metricElbAuthLatency(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricElbAuthLatency","Use ``ApplicationLoadBalancer.metrics.elbAuthLatency`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricElbAuthLatency),error}return this.metrics.elbAuthLatency(props)}metricElbAuthSuccess(props){try{jsiiDeprecationWarnings().print("aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer#metricElbAuthSuccess","Use ``ApplicationLoadBalancer.metrics.elbAuthSuccess`` instead"),jsiiDeprecationWarnings().aws_cdk_lib_aws_cloudwatch_MetricOptions(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.metricElbAuthSuccess),error}return this.metrics.elbAuthSuccess(props)}static{__runInitializers(_classThis,_classExtraInitializers)}};return ApplicationLoadBalancer2=_classThis})();exports.ApplicationLoadBalancer=ApplicationLoadBalancer;class ApplicationLoadBalancerMetrics{scope;loadBalancerFullName;constructor(scope,loadBalancerFullName){this.scope=scope,this.loadBalancerFullName=loadBalancerFullName}custom(metricName,props){return new(cloudwatch()).Metric({namespace:"AWS/ApplicationELB",metricName,dimensionsMap:{LoadBalancer:this.loadBalancerFullName},...props})}activeConnectionCount(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.activeConnectionCountSum,props)}clientTlsNegotiationErrorCount(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.clientTlsNegotiationErrorCountSum,props)}consumedLCUs(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.consumedLcUsAverage,{statistic:"sum",...props})}httpFixedResponseCount(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.httpFixedResponseCountSum,props)}httpRedirectCount(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.httpRedirectCountSum,props)}httpRedirectUrlLimitExceededCount(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.httpRedirectUrlLimitExceededCountSum,props)}httpCodeElb(code,props){return this.custom(code,{statistic:"Sum",...props})}httpCodeTarget(code,props){return this.custom(code,{statistic:"Sum",...props})}ipv6ProcessedBytes(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.iPv6ProcessedBytesSum,props)}ipv6RequestCount(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.iPv6RequestCountSum,props)}newConnectionCount(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.newConnectionCountSum,props)}processedBytes(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.processedBytesSum,props)}rejectedConnectionCount(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.rejectedConnectionCountSum,props)}requestCount(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.requestCountSum,props)}ruleEvaluations(props){return this.cannedMetric(elasticloadbalancingv2_canned_metrics_generated_1().ApplicationELBMetrics.ruleEvaluationsSum,props)}targetConnectionErrorCount(props){return this.custom("TargetConnectionErrorCount",{statistic:"Sum",...props})}targetResponseTime(props){return this.custom("TargetResponseTime",{statistic:"Average",...props})}targetTLSNegotiationErrorCount(props){return this.custom("TargetTLSNegotiationErrorCount",{statistic:"Sum",...props})}elbAuthError(props){return this.custom("ELBAuthError",{statistic:"Sum",...props})}elbAuthFailure(props){return this.custom("ELBAuthFailure",{statistic:"Sum",...props})}elbAuthLatency(props){return this.custom("ELBAuthLatency",{statistic:"Average",...props})}elbAuthSuccess(props){return this.custom("ELBAuthSuccess",{statistic:"Sum",...props})}cannedMetric(fn,props){return new(cloudwatch()).Metric({...fn({LoadBalancer:this.loadBalancerFullName}),...props}).attachTo(this.scope)}}var HttpCodeElb;(function(HttpCodeElb2){HttpCodeElb2.ELB_3XX_COUNT="HTTPCode_ELB_3XX_Count",HttpCodeElb2.ELB_4XX_COUNT="HTTPCode_ELB_4XX_Count",HttpCodeElb2.ELB_5XX_COUNT="HTTPCode_ELB_5XX_Count",HttpCodeElb2.ELB_500_COUNT="HTTPCode_ELB_500_Count",HttpCodeElb2.ELB_502_COUNT="HTTPCode_ELB_502_Count",HttpCodeElb2.ELB_503_COUNT="HTTPCode_ELB_503_Count",HttpCodeElb2.ELB_504_COUNT="HTTPCode_ELB_504_Count"})(HttpCodeElb||(exports.HttpCodeElb=HttpCodeElb={}));var HttpCodeTarget;(function(HttpCodeTarget2){HttpCodeTarget2.TARGET_2XX_COUNT="HTTPCode_Target_2XX_Count",HttpCodeTarget2.TARGET_3XX_COUNT="HTTPCode_Target_3XX_Count",HttpCodeTarget2.TARGET_4XX_COUNT="HTTPCode_Target_4XX_Count",HttpCodeTarget2.TARGET_5XX_COUNT="HTTPCode_Target_5XX_Count"})(HttpCodeTarget||(exports.HttpCodeTarget=HttpCodeTarget={}));let ImportedApplicationLoadBalancer=(()=>{let _classDecorators=[prop_injectable_1().propertyInjectable],_classDescriptor,_classExtraInitializers=[],_classThis,_classSuper=core_1().Resource,_instanceExtraInitializers=[],_addListener_decorators;var ImportedApplicationLoadBalancer2=class extends _classSuper{static{_classThis=this}static{const _metadata=typeof Symbol=="function"&&Symbol.metadata?Object.create(_classSuper[Symbol.metadata]??null):void 0;_addListener_decorators=[(0,metadata_resource_1().MethodMetadata)()],__esDecorate(this,null,_addListener_decorators,{kind:"method",name:"addListener",static:!1,private:!1,access:{has:obj=>"addListener"in obj,get:obj=>obj.addListener},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(null,_classDescriptor={value:_classThis},_classDecorators,{kind:"class",name:_classThis.name,metadata:_metadata},null,_classExtraInitializers),ImportedApplicationLoadBalancer2=_classThis=_classDescriptor.value,_metadata&&Object.defineProperty(_classThis,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}props=__runInitializers(this,_instanceExtraInitializers);static PROPERTY_INJECTION_ID="aws-cdk-lib.aws-elasticloadbalancingv2.ImportedApplicationLoadBalancer";connections;loadBalancerArn;get listeners(){throw Error(".listeners can only be accessed if the class was constructed as an owned, not imported, load balancer")}vpc;metrics;constructor(scope,id,props){super(scope,id,{environmentFromArn:props.loadBalancerArn}),this.props=props,(0,metadata_resource_1().addConstructMetadata)(this,props),this.vpc=props.vpc,this.loadBalancerArn=props.loadBalancerArn,this.connections=new(ec2()).Connections({securityGroups:[ec2().SecurityGroup.fromSecurityGroupId(this,"SecurityGroup",props.securityGroupId,{allowAllOutbound:props.securityGroupAllowsAllOutbound})]}),this.metrics=new ApplicationLoadBalancerMetrics(this,(0,util_1().parseLoadBalancerFullName)(props.loadBalancerArn))}addListener(id,props){return new(application_listener_1()).ApplicationListener(this,id,{loadBalancer:this,...props})}get loadBalancerCanonicalHostedZoneId(){if(this.props.loadBalancerCanonicalHostedZoneId)return this.props.loadBalancerCanonicalHostedZoneId;throw new(errors_1()).ValidationError(`'loadBalancerCanonicalHostedZoneId' was not provided when constructing Application Load Balancer ${this.node.path} from attributes`,this)}get loadBalancerDnsName(){if(this.props.loadBalancerDnsName)return this.props.loadBalancerDnsName;throw new(errors_1()).ValidationError(`'loadBalancerDnsName' was not provided when constructing Application Load Balancer ${this.node.path} from attributes`,this)}static{__runInitializers(_classThis,_classExtraInitializers)}};return ImportedApplicationLoadBalancer2=_classThis})(),LookedUpApplicationLoadBalancer=(()=>{let _classDecorators=[prop_injectable_1().propertyInjectable],_classDescriptor,_classExtraInitializers=[],_classThis,_classSuper=core_1().Resource,_instanceExtraInitializers=[],_addListener_decorators;var LookedUpApplicationLoadBalancer2=class extends _classSuper{static{_classThis=this}static{const _metadata=typeof Symbol=="function"&&Symbol.metadata?Object.create(_classSuper[Symbol.metadata]??null):void 0;_addListener_decorators=[(0,metadata_resource_1().MethodMetadata)()],__esDecorate(this,null,_addListener_decorators,{kind:"method",name:"addListener",static:!1,private:!1,access:{has:obj=>"addListener"in obj,get:obj=>obj.addListener},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(null,_classDescriptor={value:_classThis},_classDecorators,{kind:"class",name:_classThis.name,metadata:_metadata},null,_classExtraInitializers),LookedUpApplicationLoadBalancer2=_classThis=_classDescriptor.value,_metadata&&Object.defineProperty(_classThis,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}static PROPERTY_INJECTION_ID="aws-cdk-lib.aws-elasticloadbalancingv2.LookedUpApplicationLoadBalancer";loadBalancerArn=__runInitializers(this,_instanceExtraInitializers);loadBalancerCanonicalHostedZoneId;loadBalancerDnsName;ipAddressType;connections;vpc;metrics;get listeners(){throw Error(".listeners can only be accessed if the class was constructed as an owned, not looked up, load balancer")}constructor(scope,id,props){super(scope,id,{environmentFromArn:props.loadBalancerArn}),(0,metadata_resource_1().addConstructMetadata)(this,props),this.loadBalancerArn=props.loadBalancerArn,this.loadBalancerCanonicalHostedZoneId=props.loadBalancerCanonicalHostedZoneId,this.loadBalancerDnsName=props.loadBalancerDnsName,props.ipAddressType===cxapi().LoadBalancerIpAddressType.IPV4?this.ipAddressType=enums_1().IpAddressType.IPV4:props.ipAddressType===cxapi().LoadBalancerIpAddressType.DUAL_STACK?this.ipAddressType=enums_1().IpAddressType.DUAL_STACK:props.ipAddressType===cxapi().LoadBalancerIpAddressType.DUAL_STACK_WITHOUT_PUBLIC_IPV4&&(this.ipAddressType=enums_1().IpAddressType.DUAL_STACK_WITHOUT_PUBLIC_IPV4),this.vpc=ec2().Vpc.fromLookup(this,"Vpc",{vpcId:props.vpcId}),this.connections=new(ec2()).Connections;for(const securityGroupId of props.securityGroupIds){const securityGroup=ec2().SecurityGroup.fromLookupById(this,`SecurityGroup-${securityGroupId}`,securityGroupId);this.connections.addSecurityGroup(securityGroup)}this.metrics=new ApplicationLoadBalancerMetrics(this,(0,util_1().parseLoadBalancerFullName)(this.loadBalancerArn))}addListener(id,props){return new(application_listener_1()).ApplicationListener(this,id,{...props,loadBalancer:this})}static{__runInitializers(_classThis,_classExtraInitializers)}};return LookedUpApplicationLoadBalancer2=_classThis})();
